/*C12*/SET SCHEMA PUBLIC
drop table if exists favourite cascade 
drop table if exists offer cascade 
drop table if exists post cascade 
drop table if exists review cascade 
drop table if exists user cascade 
create table favourite (id bigint generated by default as identity, target_id bigint, user_id bigint, primary key (id))
create table offer (publish_date date, id bigint generated by default as identity, offer bigint, post_id bigint, user_id bigint, primary key (id))
create table post (publish_date date, purchase_date date, buyer_id bigint, id bigint generated by default as identity, seller_id bigint, starting_price bigint, title varchar(255), post_image clob, primary key (id))
create table review (publish_date date, author_id bigint, id bigint generated by default as identity, user_id bigint, content varchar(255), primary key (id))
create table user (registration_date date, finted_coin_balance bigint, id bigint generated by default as identity, email varchar(255) unique, first_name varchar(255), last_name varchar(255), password varchar(255), user_address_city varchar(255), user_address_number varchar(255), user_address_route varchar(255), username varchar(255) unique, primary key (id))
alter table if exists favourite add constraint FKrt80salddi6dkjqd5cryodj3h foreign key (target_id) references user
alter table if exists favourite add constraint FK83lccer6s8bgj5jgjwan5eipk foreign key (user_id) references user
alter table if exists offer add constraint FKlbr3ol1p0b5wb3sra7kljhhqt foreign key (post_id) references post
alter table if exists offer add constraint FKo0rdvexlxmyakcvw8b5aqidlk foreign key (user_id) references user
alter table if exists post add constraint FKie9ax41b5pt2s0gcmb28xhcf2 foreign key (buyer_id) references user
alter table if exists post add constraint FK50jwnhnyevk2kxvt29cetcg9h foreign key (seller_id) references user
alter table if exists review add constraint FKhaxvalsvi9mqlu2kq5ev0wgys foreign key (author_id) references user
alter table if exists review add constraint FKiyf57dy48lyiftdrf7y87rnxi foreign key (user_id) references user
INSERT INTO USER VALUES('2023-10-18',500,0,'pierluigitrc@gmail.com','Pierluigi','Trocini','123456789','Rende','166','Malvitani','pit0500')
COMMIT
INSERT INTO POST VALUES('2023-10-18',NULL,NULL,0,0,123,'meme fatto da me',NULL)
COMMIT
/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO LOB_IDS VALUES(1,0,0,40)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 2
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=0
INSERT INTO BLOCKS VALUES(0,1,0)
INSERT INTO BLOCKS VALUES(1,2147483646,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=0
INSERT INTO LOBS VALUES(0,1,0,1)
COMMIT
DELETE FROM LOB_IDS WHERE LOB_ID=1
INSERT INTO LOB_IDS VALUES(1,24,0,40)
COMMIT
/*C12*/DELETE FROM POST WHERE ID=0
INSERT INTO POST VALUES('2023-10-18',NULL,NULL,0,0,123,'meme fatto da me',1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=1
INSERT INTO LOB_IDS VALUES(1,24,1,40)
COMMIT
/*C13*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
DISCONNECT
/*C31*/SET SCHEMA PUBLIC
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
DISCONNECT
/*C29*/SET SCHEMA PUBLIC
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
DISCONNECT
/*C28*/SET SCHEMA PUBLIC
DISCONNECT
/*C26*/SET SCHEMA PUBLIC
DISCONNECT
/*C33*/SET SCHEMA PUBLIC
DISCONNECT
/*C37*/SET SCHEMA PUBLIC
DISCONNECT
/*C36*/SET SCHEMA PUBLIC
DISCONNECT
/*C40*/SET SCHEMA PUBLIC
DISCONNECT
/*C34*/SET SCHEMA PUBLIC
DISCONNECT
/*C39*/SET SCHEMA PUBLIC
DISCONNECT
/*C32*/SET SCHEMA PUBLIC
DISCONNECT
/*C41*/SET SCHEMA PUBLIC
DISCONNECT
/*C35*/SET SCHEMA PUBLIC
DISCONNECT
/*C38*/SET SCHEMA PUBLIC
DISCONNECT
/*C42*/SET SCHEMA PUBLIC
drop table if exists favourite cascade 
drop table if exists offer cascade 
drop table if exists post cascade 
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=1
INSERT INTO LOB_IDS VALUES(1,24,0,40)
COMMIT
SET SCHEMA PUBLIC
drop table if exists review cascade 
drop table if exists user cascade 
DISCONNECT
/*C43*/SET SCHEMA PUBLIC
DISCONNECT
/*C44*/SET SCHEMA PUBLIC
DISCONNECT
/*C45*/SET SCHEMA PUBLIC
DISCONNECT
/*C46*/SET SCHEMA PUBLIC
DISCONNECT
/*C47*/SET SCHEMA PUBLIC
DISCONNECT
/*C48*/SET SCHEMA PUBLIC
DISCONNECT
/*C49*/SET SCHEMA PUBLIC
DISCONNECT
/*C50*/SET SCHEMA PUBLIC
DISCONNECT
/*C51*/SET SCHEMA PUBLIC
DISCONNECT
